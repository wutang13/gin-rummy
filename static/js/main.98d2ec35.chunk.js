(this["webpackJsonpgin-rummy"]=this["webpackJsonpgin-rummy"]||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(11),u=n.n(a),o=(n(37),n(28)),i=(n(38),n(39),n(6)),s=["S","C","H","D"],d=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],l={userHand:{sets:[],runs:[],deadwood:[]},computerHand:{sets:[],runs:[],deadwood:[]},deck:[],discard:[],currentStage:"",userGameScore:0,computerGameScore:0,discardMemory:10,playerPickup:[]},m=n(1);function f(e){var t=e.gameState,n=e.setGameState,r=e.onCardSelect,c=e.hand,a=e.faceUp;return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{children:v(e.hand).map((function(e){return Object(m.jsx)("img",{onClick:function(){return r&&n?n(Object(i.a)({},r(e,t))):console.log("You cannot discard an opponent's card")},src:a?"".concat("/gin-rummy","/cards/").concat(h(e),".jpg"):"".concat("/gin-rummy","/cards/blue_back.jpg"),alt:h(e),style:{maxHeight:180,margin:10}},h(e))}))}),a?Object(m.jsxs)("p",{className:"game-text",style:{marginLeft:"20px"},children:["Score: ",p(c.deadwood)]}):void 0]})}function p(e){var t=0;return e.forEach((function(e){var n=d.indexOf(e.value)+1;t+=n>9?10:n})),t}function v(e){return e.sets.flat().concat(e.runs.flat(),e.deadwood)}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=d[d.indexOf(e.value)+t];return n?{value:n,suit:e.suit}:null}function h(e){return"".concat(e.value).concat(e.suit)}var g=n(31),x=n.n(g),b=n(32),O=n(17),y=n(22),S=n(21);function k(e){var t,n,c=Object(r.useState)(l),a=Object(o.a)(c,2),u=a[0],s=a[1];Object(r.useEffect)((function(){u.deck.length<3&&"No one"!==u.winner?s(Object(i.a)(Object(i.a)({},u),{},{winner:"No one",currentStage:"endround"})):"computer"===u.currentStage&&s(Object(i.a)({},function(e){var t=function(e){if(e.discard.length>0){var t=e.discard[e.discard.length-1],n=e.computerHand.sets.some((function(e){return e[0].value===t.value})),r=e.computerHand.deadwood.filter((function(e){return e.value===t.value})).length>1,c=e.computerHand.runs.some((function(e){return j(e[e.length-1],1)===t||j(e[0],-1)===t}));if(r||n||c||M(e.computerHand.deadwood,t))return!1}return!0}(e),n=[];t?n.push("Computer drew from deck"):n.push("Computer drew from discard");var r=t?e.deck.pop():e.discard.pop(),c=v(e.computerHand);r&&(c.push(r),e.computerHand=H(c));var a=function(e){var t,n=E(e.computerHand.deadwood),r=n[10]+n.J+n.Q+n.K;if(e.deck.length<20&&r>0){var c=e.computerHand.deadwood.sort((function(e,t){return d.indexOf(e.value)-d.indexOf(t.value)})).pop();return c||"knock"}var a=function(e){var t=e.computerHand,n=e.playerPickup,r=e.discardMemory,c=t.deadwood,a=E(c),u=e.discard.length>=r?e.discard.slice(e.discard.length-r):[];return c.map((function(e){var t=0,r=!1,o=!1;a[e.value]>1&&(t+=a[e.value]-84,r=!0);var i=j(e,1),s=j(e,-1);return(i&&c.some((function(e){return h(e)===h(i)}))||s&&c.some((function(e){return h(e)===h(s)})))&&(t+=82,o=!0),o&&r&&(t+=10),u.forEach((function(n){var r,c;n.value===e.value?t-=71:n.suit!==e.suit||(null===(r=j(e,1))||void 0===r?void 0:r.value)!==n.value&&(null===(c=j(e,-1))||void 0===c?void 0:c.value)!==n.value||(t-=71)})),n.forEach((function(n){var r,c;n.value===e.value?t-=15:n.suit!==e.suit||(null===(r=j(e,1))||void 0===r?void 0:r.value)!==n.value&&(null===(c=j(e,-1))||void 0===c?void 0:c.value)!==n.value||(t-=15)})),t-=(d.indexOf(e.value)+1)/10,{card:e,score:t}})).sort((function(e,t){return t.score-e.score}))}(e),u=null===(t=a.pop())||void 0===t?void 0:t.card;return u||"knock"}(e),u="string"===typeof a&&r?r:a;if("string"!=typeof u){n.push("Opponent discarded the ".concat((s=u,"".concat(function(){switch(s.value){case"A":return"Ace";case"K":return"King";case"Q":return"Queen";case"J":return"Jack";default:return s.value}}()," of ").concat(function(){switch(s.suit){case"H":return"Hearts";case"D":return"Diamonds";case"S":return"Spades";default:return"Clubs"}}()))));var o=c.indexOf(u);if(o>-1){var i=c.splice(o,1);e.discard.push(i[0])}}var s;if(e.computerHand=H(c),function(e){var t=p(e.computerHand.deadwood);if(t<3)return!0;if(t<7&&e.deck.length>18)return!0;if(t<=10&&e.deck.length>25)return!0;return!1}(e))return N(e,!1);return e.currentStage="pickup",e.computerMoves=n,e}(u)))}),[u]),Object(r.useEffect)((function(){return s(Object(i.a)({},w(e.discardMemory)))}),[e.discardMemory]);var g=u.userGameScore>=100||u.computerGameScore>=100;return Object(m.jsxs)("div",{style:{margin:"30px"},children:[Object(m.jsx)(y.a,{show:g,backdrop:"static",size:"lg",centered:!0,children:Object(m.jsxs)(y.a.Dialog,{children:[Object(m.jsxs)(y.a.Body,{children:[Object(m.jsx)("p",{className:"game-text",children:"".concat(null!==(t=u.winner)&&void 0!==t?t:""," won the game")}),Object(m.jsx)("p",{className:"game-text",children:"Do you want to play again?"})]}),Object(m.jsxs)(y.a.Footer,{children:[Object(m.jsx)(S.a,{variant:"primary",onClick:function(){return s(w(e.discardMemory))},children:"Yes"}),Object(m.jsx)(S.a,{variant:"secondary",onClick:function(){return e.onExit(!1)},children:"No"})]})]})}),Object(m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(m.jsx)("div",{}),Object(m.jsx)(f,{hand:u.computerHand,gameState:u,faceUp:!!u.currentStage}),Object(m.jsxs)(O.a,{children:[Object(m.jsx)(O.a.Toggle,{variant:"outline-primary",children:Object(m.jsx)(x.a,{path:b.a,size:2,color:"gray"})}),Object(m.jsxs)(O.a.Menu,{children:[Object(m.jsx)(O.a.Item,{onClick:function(){return s(w(e.discardMemory))},children:"Reset Game"}),Object(m.jsx)(O.a.Item,{onClick:function(){return e.onExit(!1)},children:"Exit Game"})]})]})]}),Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:[Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly"},children:[Object(m.jsx)("p",{className:"game-text",children:"Discard Pile"}),u.discard.length>0?Object(m.jsx)("img",{src:"".concat("/gin-rummy","/cards/").concat(h(u.discard[u.discard.length-1]),".jpg"),onClick:function(){return s(Object(i.a)({},G(!0,u)))},alt:h(u.discard[u.discard.length-1]),style:{maxHeight:180,margin:10}}):Object(m.jsx)("p",{style:{margin:20},children:"Empty"})]}),Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly",margin:"10px 100px 10px 100px"},children:["pickup"===u.currentStage&&u.computerMoves?u.computerMoves.map((function(e){return Object(m.jsx)("p",{className:"game-text",children:e})})):void 0,Object(m.jsx)("p",{className:"game-text",children:function(){switch(u.currentStage){case"discard":return"Click on the card you want to discard";case"pickup":return"Click on the card you want to pick up";case"knock":return"Do you want to knock?";default:return""}}()}),"knock"===u.currentStage?Object(m.jsxs)("div",{children:[Object(m.jsx)("button",{className:"game-button",onClick:function(){return s(Object(i.a)({},N(u,!0)))},children:"Knock"}),Object(m.jsx)("button",{className:"game-button",onClick:function(){return s(Object(i.a)(Object(i.a)({},u),{},{currentStage:"computer"}))},children:"End Turn"})]}):void 0,"endround"===u.currentStage?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{className:"game-text",children:"".concat(null!==(n=u.winner)&&void 0!==n?n:""," won that round")}),Object(m.jsx)("button",{className:"game-button",onClick:function(){return s(Object(i.a)({},function(e){var t=e.userGameScore,n=e.computerGameScore,r="You"===e.winner?"pickup":"computer";return Object(i.a)(Object(i.a)({},w(e.discardMemory,r)),{},{computerGameScore:n,userGameScore:t})}(u)))},children:"End Round"})]}):void 0]}),Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly"},children:[Object(m.jsx)("p",{className:"game-text",children:"Deck"}),Object(m.jsx)("p",{className:"game-text",style:{fontSize:"20px"},children:"Cards Left: ".concat(u.deck.length)}),u.deck.length>0?Object(m.jsx)("img",{src:"".concat("/gin-rummy","/cards/blue_back.jpg"),onClick:function(){return s(Object(i.a)({},G(!1,u)))},alt:h(u.deck[u.deck.length-1]),style:{maxHeight:180,margin:10}}):Object(m.jsx)("p",{style:{margin:20},children:"Empty"})]})]}),Object(m.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(m.jsx)(f,{hand:u.userHand,onCardSelect:C,gameState:u,setGameState:s,faceUp:!0})}),Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around",marginTop:"40px"},children:[Object(m.jsx)("p",{className:"game-text",children:"Player Game Score: ".concat(u.userGameScore)}),Object(m.jsx)("p",{className:"game-text",children:"Computer Game Score: ".concat(u.computerGameScore)})]})]})}function w(e,t){var n=[];s.forEach((function(e){d.forEach((function(t){n.push({value:t,suit:e})}))}));var r=n.sort((function(){return Math.random()-Math.random()})).slice(0,10),c=(n=n.filter((function(e){return!r.includes(e)}))).sort((function(){return Math.random()-Math.random()})).slice(0,10),a=[(n=n.filter((function(e){return!c.includes(e)})))[0]];n=n.slice(1),console.log(t);var u=null!==t&&void 0!==t?t:Math.random()>.5?"computer":"pickup";console.log(u);var o=H(r),i=H(c);return console.log({userHand:o,computerHand:i,deck:n,discard:a,currentStage:u,userGameScore:0,computerGameScore:0}),{userHand:o,computerHand:i,deck:n,discard:a,currentStage:u,userGameScore:0,computerGameScore:0,discardMemory:e,playerPickup:[]}}function H(e){for(var t=e.sort((function(e,t){var n=13*s.indexOf(e.suit),r=13*s.indexOf(t.suit);return n+d.indexOf(e.value)-(r+d.indexOf(t.value))})),n=[],r=0;r<t.length-2;r++){var c=[];M(t,t[r])&&function(){c.push(t[r]);for(var e=j(t[r],1);e&&t.some((function(t){var n,r;return t.value==(null===(n=e)||void 0===n?void 0:n.value)&&t.suit==(null===(r=e)||void 0===r?void 0:r.suit)}))&&r<t.length;)c.push(e),r++,e=j(t[r],1)}(),c.length>2&&n.push(c)}var a=e.filter((function(e){return!n.flat().some((function(t){return e.value===(null===t||void 0===t?void 0:t.value)&&e.suit===(null===t||void 0===t?void 0:t.suit)}))})),u=[];d.forEach((function(e){var t=[];s.forEach((function(n){a.some((function(t){return t.suit===n&&t.value===e}))&&t.push({suit:n,value:e})})),t.length>2&&u.push(t)}));var o=a.filter((function(e){return!u.flat().some((function(t){return e.value===(null===t||void 0===t?void 0:t.value)&&e.suit===(null===t||void 0===t?void 0:t.suit)}))}));return{sets:u,runs:n,deadwood:o}}function C(e,t){if("discard"===t.currentStage){var n=H(v(t.userHand).filter((function(t){return t.value!==e.value||t.suit!==e.suit})));t.discard.push(e),t.userHand=n,t.currentStage=p(t.userHand.deadwood)>10?"computer":"knock"}return t}function G(e,t){if("pickup"===t.currentStage){var n=e?t.discard.pop():t.deck.pop();if(n){var r=v(t.userHand);r.push(n);var c=H(r);t.userHand=c,t.currentStage="discard",t.playerPickup.push(n)}}return t}function E(e){var t={A:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,J:0,Q:0,K:0};return e.forEach((function(e){e.value in t&&(t[e.value]+=1)})),t}function M(e,t){if("A"!==t.value&&"2"!==t.value){var n=j(t,-1),r=j(t,-2);if(n&&r&&e.some((function(e){return h(e)===h(n)}))&&e.some((function(e){return h(e)===h(r)})))return!0}if("K"!==t.value&&"Q"!==t.value){var c=j(t,1),a=j(t,2);if(c&&a&&e.some((function(e){return h(e)===h(c)}))&&e.some((function(e){return h(e)===h(a)})))return!0}var u=j(t,-1),o=j(t,1);return!!(u&&o&&e.some((function(e){return h(e)===h(u)}))&&e.some((function(e){return h(e)===h(o)})))}function N(e,t){e.currentStage="endround";var n=p(e.userHand.deadwood),r=p(e.computerHand.deadwood);if(t&&0===n)return Object(i.a)(Object(i.a)({},e),{},{userGameScore:e.userGameScore+r+25,winner:"You"});if(!t&&0===r)return Object(i.a)(Object(i.a)({},e),{},{computerGameScore:e.computerGameScore+n+25,winner:"Your Opponent"});var c=function(e,t){if(t){var n=e.computerHand.deadwood.filter((function(t){var n=e.userHand.sets.some((function(e){return e[0].value===t.value})),r=e.userHand.runs.some((function(e){return M(e,t)}));return!n&&!r}));return{updatedPlayerScore:p(e.userHand.deadwood),updatedComputerScore:p(n)}}return{updatedPlayerScore:p(e.userHand.deadwood.filter((function(t){var n=e.computerHand.sets.some((function(e){return e[0].value===t.value})),r=e.computerHand.runs.some((function(e){return M(e,t)}));return!n&&!r}))),updatedComputerScore:p(e.computerHand.deadwood)}}(e,t),a=c.updatedPlayerScore,u=c.updatedComputerScore;return t&&a<u?Object(i.a)(Object(i.a)({},e),{},{userGameScore:e.userGameScore+u-a,winner:"You"}):t&&a>u?Object(i.a)(Object(i.a)({},e),{},{computerGameScore:e.computerGameScore+a-u+25,winner:"Your Opponent"}):!t&&a<u?Object(i.a)(Object(i.a)({},e),{},{userGameScore:e.userGameScore+u-a+25,winner:"You"}):Object(i.a)(Object(i.a)({},e),{},{computerGameScore:e.computerGameScore+a-u,winner:"Your Opponent"})}var D=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{style:{fontFamily:"Lato",fontSize:"80px",color:"#F1FAEE",backgroundColor:"#457B9D",margin:"0",textAlign:"center",padding:"20px"},children:"Gin Rummy"}),n?Object(m.jsx)(k,{onExit:c,discardMemory:10}):Object(m.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"500px"},children:Object(m.jsx)("button",{className:"game-button",onClick:function(){return c(!0)},children:"Start Game"})})]})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,u=t.getTTFB;n(e),r(e),c(e),a(e),u(e)}))};u.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(D,{})}),document.getElementById("root")),P()}},[[44,1,2]]]);
//# sourceMappingURL=main.98d2ec35.chunk.js.map