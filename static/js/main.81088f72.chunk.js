(this["webpackJsonpgin-rummy"]=this["webpackJsonpgin-rummy"]||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(7),u=n.n(a),o=(n(21),n(8)),i=(n(22),n(3)),s=["S","C","H","D"],d=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],l={userHand:{sets:[],runs:[],deadwood:[]},computerHand:{sets:[],runs:[],deadwood:[]},deck:[],discard:[],currentStage:"",userGameScore:0,computerGameScore:0},m=n(1);function f(e){var t=e.gameState,n=e.setGameState,r=e.onCardSelect,c=e.hand,a=e.faceUp;return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{children:j(e.hand).map((function(e){return Object(m.jsx)("img",{onClick:function(){return r&&n?n(Object(i.a)({},r(e,t))):console.log("You cannot discard an opponent's card")},src:a?"".concat("/gin-rummy","/cards/").concat(g(e),".jpg"):"".concat("/gin-rummy","/cards/blue_back.jpg"),alt:g(e),style:{maxHeight:180,margin:10}},g(e))}))}),a?Object(m.jsxs)("p",{className:"game-text",style:{marginLeft:"20px"},children:["Score: ",p(c.deadwood)]}):void 0]})}function p(e){var t=0;return e.forEach((function(e){var n=d.indexOf(e.value)+1;t+=n>9?10:n})),t}function j(e){return e.sets.flat().concat(e.runs.flat(),e.deadwood)}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=d[d.indexOf(e.value)+t];return n?{value:n,suit:e.suit}:null}function g(e){return"".concat(e.value).concat(e.suit)}var h=n(12),x=n.n(h),b=n(16),O=n(32);function S(e){var t,n=Object(r.useState)(l),c=Object(o.a)(n,2),a=c[0],u=c[1];Object(r.useEffect)((function(){"computer"===a.currentStage&&u(Object(i.a)({},function(e){var t=function(e){if(e.discard.length>0){var t=e.discard[e.discard.length-1],n=e.computerHand.sets.some((function(e){return e[0].value===t.value})),r=e.computerHand.deadwood.filter((function(e){return e.value===t.value})).length>1,c=e.computerHand.runs.some((function(e){return v(e[e.length-1],1)===t||v(e[0],-1)===t}));if(r||n||c||G(e.computerHand.deadwood,t))return!1}return!0}(e),n=[];t?n.push("Computer drew from deck"):n.push("Computer drew from discard");var r=t?e.deck.pop():e.discard.pop(),c=j(e.computerHand);r&&(c.push(r),e.computerHand=k(c));var a=function(e){var t,n=C(e.computerHand.deadwood),r=n[10]+n.J+n.Q+n.K;if(e.deck.length<20&&r>0){var c=e.computerHand.deadwood.sort((function(e,t){return d.indexOf(e.value)-d.indexOf(t.value)})).pop();return c||"knock"}var a=function(e){var t=C(e);return e.map((function(n){var r=0,c=!1,a=!1;t[n.value]>1&&(r+=t[n.value]-1,c=!0);var u=v(n,1),o=v(n,-1);return(u&&e.some((function(e){return g(e)===g(u)}))||o&&e.some((function(e){return g(e)===g(o)})))&&(r+=1,a=!0),a&&c&&(r+=1),{card:n,score:r-=(d.indexOf(n.value)+1)/10}})).sort((function(e,t){return t.score-e.score}))}(e.computerHand.deadwood),u=null===(t=a.pop())||void 0===t?void 0:t.card;return u||"knock"}(e),u="string"===typeof a&&r?r:a;if("string"!=typeof u){n.push("Opponent discarded the ".concat((s=u,"".concat(function(){switch(s.value){case"A":return"Ace";case"K":return"King";case"Q":return"Queen";case"J":return"Jack";default:return s.value}}()," of ").concat(function(){switch(s.suit){case"H":return"Hearts";case"D":return"Diamonds";case"S":return"Spades";default:return"Clubs"}}()))));var o=c.indexOf(u);if(o>-1){var i=c.splice(o,1);e.discard.push(i[0])}}var s;if(e.computerHand=k(c),function(e){var t=p(e.computerHand.deadwood);if(0===t)return!0;if(t<=5&&e.deck.length>18)return!0;if(t<=10&&e.deck.length>25)return!0;return!1}(e))return E(e,!1);return e.currentStage="pickup",e.computerMoves=n,e}(a)))}),[a]),Object(r.useEffect)((function(){return u(Object(i.a)({},y()))}),[]);return Object(m.jsxs)("div",{style:{margin:"30px"},children:[Object(m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(m.jsx)("div",{}),Object(m.jsx)(f,{hand:a.computerHand,gameState:a,faceUp:"endround"===a.currentStage}),Object(m.jsxs)(O.a,{children:[Object(m.jsx)(O.a.Toggle,{className:"menu-button",children:Object(m.jsx)(x.a,{path:b.a,size:2,color:"gray"})}),Object(m.jsxs)(O.a.Menu,{className:"in-game-menu",children:[Object(m.jsx)(O.a.Item,{className:"menu-item",onClick:function(){return u(y())},children:"Reset Game"}),Object(m.jsx)(O.a.Item,{className:"menu-item",onClick:function(){return e.onExit(!1)},children:"Exit Game"})]})]})]}),Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:[Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly"},children:[Object(m.jsx)("p",{className:"game-text",children:"Discard Pile"}),a.discard.length>0?Object(m.jsx)("img",{src:"".concat("/gin-rummy","/cards/").concat(g(a.discard[a.discard.length-1]),".jpg"),onClick:function(){return u(Object(i.a)({},H(!0,a)))},alt:g(a.discard[a.discard.length-1]),style:{maxHeight:180,margin:10}}):Object(m.jsx)("p",{style:{margin:20},children:"Empty"})]}),Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly",margin:"10px 100px 10px 100px"},children:["pickup"===a.currentStage&&a.computerMoves?a.computerMoves.map((function(e){return Object(m.jsx)("p",{className:"game-text",children:e})})):void 0,Object(m.jsx)("p",{className:"game-text",children:function(){switch(a.currentStage){case"discard":return"Click on the card you want to discard";case"pickup":return"Click on the card you want to pick up";case"knock":return"Do you want to knock?";default:return""}}()}),"knock"===a.currentStage?Object(m.jsxs)("div",{children:[Object(m.jsx)("button",{className:"game-button",onClick:function(){return u(Object(i.a)({},E(a,!0)))},children:"Knock"}),Object(m.jsx)("button",{className:"game-button",onClick:function(){return u(Object(i.a)(Object(i.a)({},a),{},{currentStage:"computer"}))},children:"End Turn"})]}):void 0,"endround"===a.currentStage?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{className:"game-text",children:"".concat(null!==(t=a.winner)&&void 0!==t?t:""," won that round")}),Object(m.jsx)("button",{className:"game-button",onClick:function(){return u(Object(i.a)({},function(e){var t=e.userGameScore,n=e.computerGameScore,r="You"===e.winner?"pickup":"computer";return Object(i.a)(Object(i.a)({},y(r)),{},{computerGameScore:n,userGameScore:t})}(a)))},children:"End Round"})]}):void 0]}),Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly"},children:[Object(m.jsx)("p",{className:"game-text",children:"Deck"}),Object(m.jsx)("p",{className:"game-text",style:{fontSize:"20px"},children:"Cards Left: ".concat(a.deck.length)}),a.deck.length>0?Object(m.jsx)("img",{src:"".concat("/gin-rummy","/cards/blue_back.jpg"),onClick:function(){return u(Object(i.a)({},H(!1,a)))},alt:g(a.deck[a.deck.length-1]),style:{maxHeight:180,margin:10}}):Object(m.jsx)("p",{style:{margin:20},children:"Empty"})]})]}),Object(m.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(m.jsx)(f,{hand:a.userHand,onCardSelect:w,gameState:a,setGameState:u,faceUp:!0})}),Object(m.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around",marginTop:"40px"},children:[Object(m.jsx)("p",{className:"game-text",children:"Player Game Score: ".concat(a.userGameScore)}),Object(m.jsx)("p",{className:"game-text",children:"Computer Game Score: ".concat(a.computerGameScore)})]})]})}function y(e){var t=[];s.forEach((function(e){d.forEach((function(n){t.push({value:n,suit:e})}))}));var n=t.sort((function(){return Math.random()-Math.random()})).slice(0,10),r=(t=t.filter((function(e){return!n.includes(e)}))).sort((function(){return Math.random()-Math.random()})).slice(0,10),c=[(t=t.filter((function(e){return!r.includes(e)})))[0]];t=t.slice(1),console.log(e);var a=null!==e&&void 0!==e?e:Math.random()>.5?"computer":"pickup";console.log(a);return{userHand:k(n),computerHand:k(r),deck:t,discard:c,currentStage:a,userGameScore:0,computerGameScore:0}}function k(e){for(var t=e.sort((function(e,t){var n=13*s.indexOf(e.suit),r=13*s.indexOf(t.suit);return n+d.indexOf(e.value)-(r+d.indexOf(t.value))})),n=[],r=0;r<t.length-2;r++){var c=[];G(t,t[r])&&function(){c.push(t[r]);for(var e=v(t[r],1);e&&t.some((function(t){var n,r;return t.value==(null===(n=e)||void 0===n?void 0:n.value)&&t.suit==(null===(r=e)||void 0===r?void 0:r.suit)}))&&r<t.length;)c.push(e),r++,e=v(t[r],1)}(),c.length>2&&n.push(c)}var a=e.filter((function(e){return!n.flat().some((function(t){return e.value===(null===t||void 0===t?void 0:t.value)&&e.suit===(null===t||void 0===t?void 0:t.suit)}))})),u=[];d.forEach((function(e){var t=[];s.forEach((function(n){a.some((function(t){return t.suit===n&&t.value===e}))&&t.push({suit:n,value:e})})),t.length>2&&u.push(t)}));var o=a.filter((function(e){return!u.flat().some((function(t){return e.value===(null===t||void 0===t?void 0:t.value)&&e.suit===(null===t||void 0===t?void 0:t.suit)}))}));return{sets:u,runs:n,deadwood:o}}function w(e,t){if("discard"===t.currentStage){var n=k(j(t.userHand).filter((function(t){return t.value!==e.value||t.suit!==e.suit})));t.discard.push(e),t.userHand=n,t.currentStage=p(t.userHand.deadwood)>10?"computer":"knock"}return t}function H(e,t){if("pickup"===t.currentStage){var n=e?t.discard.pop():t.deck.pop();if(n){var r=j(t.userHand);r.push(n);var c=k(r);t.userHand=c,t.currentStage="discard"}}return t}function C(e){var t={A:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,J:0,Q:0,K:0};return e.forEach((function(e){e.value in t&&(t[e.value]+=1)})),t}function G(e,t){if("A"!==t.value&&"2"!==t.value){var n=v(t,-1),r=v(t,-2);if(n&&r&&e.some((function(e){return g(e)===g(n)}))&&e.some((function(e){return g(e)===g(r)})))return!0}if("K"!==t.value&&"Q"!==t.value){var c=v(t,1),a=v(t,2);if(c&&a&&e.some((function(e){return g(e)===g(c)}))&&e.some((function(e){return g(e)===g(a)})))return!0}var u=v(t,-1),o=v(t,1);return!!(u&&o&&e.some((function(e){return g(e)===g(u)}))&&e.some((function(e){return g(e)===g(o)})))}function E(e,t){e.currentStage="endround";var n=p(e.userHand.deadwood),r=p(e.computerHand.deadwood);if(t&&0===n)return Object(i.a)(Object(i.a)({},e),{},{userGameScore:e.userGameScore+r+25,winner:"You"});if(!t&&0===r)return Object(i.a)(Object(i.a)({},e),{},{computerGameScore:e.computerGameScore+n+25,winner:"Your Opponent"});var c=function(e,t){if(t){var n=e.computerHand.deadwood.filter((function(t){var n=e.userHand.sets.some((function(e){return e[0].value===t.value})),r=e.userHand.runs.some((function(e){return G(e,t)}));return!n&&!r}));return{updatedPlayerScore:p(e.userHand.deadwood),updatedComputerScore:p(n)}}return{updatedPlayerScore:p(e.userHand.deadwood.filter((function(t){var n=e.computerHand.sets.some((function(e){return e[0].value===t.value})),r=e.computerHand.runs.some((function(e){return G(e,t)}));return!n&&!r}))),updatedComputerScore:p(e.computerHand.deadwood)}}(e,t),a=c.updatedPlayerScore,u=c.updatedComputerScore;return t&&a<u?Object(i.a)(Object(i.a)({},e),{},{userGameScore:e.userGameScore+u-a,winner:"You"}):t&&a>u?Object(i.a)(Object(i.a)({},e),{},{computerGameScore:e.computerGameScore+a-u+25,winner:"Your Opponent"}):!t&&a<u?Object(i.a)(Object(i.a)({},e),{},{userGameScore:e.userGameScore+u-a+25,winner:"You"}):Object(i.a)(Object(i.a)({},e),{},{computerGameScore:e.computerGameScore+a-u,winner:"Your Opponent"})}var N=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{style:{fontFamily:"Lato",fontSize:"80px",color:"#F1FAEE",backgroundColor:"#457B9D",margin:"0",textAlign:"center",padding:"20px"},children:"Gin Rummy"}),n?Object(m.jsx)(S,{onExit:c}):Object(m.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"500px"},children:Object(m.jsx)("button",{className:"game-button",onClick:function(){return c(!0)},children:"Start Game"})})]})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,33)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,u=t.getTTFB;n(e),r(e),c(e),a(e),u(e)}))};u.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(N,{})}),document.getElementById("root")),D()}},[[27,1,2]]]);
//# sourceMappingURL=main.81088f72.chunk.js.map