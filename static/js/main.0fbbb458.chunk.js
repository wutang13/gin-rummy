(this["webpackJsonpgin-rummy"]=this["webpackJsonpgin-rummy"]||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(7),u=n.n(a),o=(n(21),n(8)),i=(n(22),n(3)),s=["S","C","H","D"],d=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],l=n(1);function m(e){var t=e.gameState,n=e.setGameState,r=e.onCardSelect,c=e.hand,a=e.faceUp;return Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{children:p(e.hand).map((function(e){return Object(l.jsx)("img",{onClick:function(){return r&&n?n(Object(i.a)({},r(e,t))):console.log("You cannot discard an opponent's card")},src:a?"".concat("/gin-rummy","/cards/").concat(v(e),".jpg"):"".concat("/gin-rummy","/cards/blue_back.jpg"),alt:v(e),style:{maxHeight:180,margin:10}},v(e))}))}),a?Object(l.jsxs)("p",{className:"game-text",style:{marginLeft:"20px"},children:["Score: ",f(c.deadwood)]}):void 0]})}function f(e){var t=0;return e.forEach((function(e){var n=d.indexOf(e.value)+1;t+=n>9?10:n})),t}function p(e){return e.sets.flat().concat(e.runs.flat(),e.deadwood)}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=d[d.indexOf(e.value)+t];return n?{value:n,suit:e.suit}:null}function v(e){return"".concat(e.value).concat(e.suit)}var g=n(12),h=n.n(g),x=n(16),b=n(32);function O(e){var t,n=Object(r.useState)(y()),c=Object(o.a)(n,2),a=c[0],u=c[1];Object(r.useEffect)((function(){"computer"===a.currentStage&&u(Object(i.a)({},function(e){var t=function(e){if(e.discard.length>0){var t=e.discard[e.discard.length-1],n=e.computerHand.sets.some((function(e){return e[0].value===t.value})),r=e.computerHand.deadwood.filter((function(e){return e.value===t.value})).length>1,c=e.computerHand.runs.some((function(e){return j(e[e.length-1],1)===t||j(e[0],-1)===t}));if(r||n||c||C(e.computerHand.deadwood,t))return!1}return!0}(e);console.log("Starting state for computer"),console.log(e);var n=[];t?n.push("Computer drew from deck"):n.push("Computer drew from discard");var r=t?e.deck.pop():e.discard.pop(),c=p(e.computerHand);r&&(console.log("Drawn Card: ".concat(v(r))),c.push(r),e.computerHand=S(c));var a=function(e){var t,n=H(e.computerHand.deadwood),r=n[10]+n.J+n.Q+n.K;if(e.deck.length<20&&r>0){var c=e.computerHand.deadwood.sort((function(e,t){return d.indexOf(e.value)-d.indexOf(t.value)})).pop();return c||"knock"}var a=function(e){var t=H(e),n=e.map((function(n){var r=0,c=!1,a=!1;t[n.value]>1&&(r+=t[n.value]-1,c=!0);var u=j(n,1),o=j(n,-1);return(u&&e.some((function(e){return v(e)===v(u)}))||o&&e.some((function(e){return v(e)===v(o)})))&&(r+=1,a=!0),a&&c&&(r+=1),{card:n,score:r-=(d.indexOf(n.value)+1)/10}})).sort((function(e,t){return t.score-e.score}));return console.log(n),n}(e.computerHand.deadwood),u=null===(t=a.pop())||void 0===t?void 0:t.card;return u||"knock"}(e),u="string"===typeof a&&r?r:a;if("string"!=typeof u){console.log("Computer discarding: ".concat(v(u))),n.push("Opponent discarded the ".concat((s=u,"".concat(function(){switch(s.value){case"A":return"Ace";case"K":return"King";case"Q":return"Queen";case"J":return"Jack";default:return s.value}}()," of ").concat(function(){switch(s.suit){case"H":return"Hearts";case"D":return"Diamonds";case"S":return"Spades";default:return"Clubs"}}()))));var o=c.indexOf(u);if(o>-1){var i=c.splice(o,1);e.discard.push(i[0])}}var s;if(e.computerHand=S(c),function(e){var t=f(e.computerHand.deadwood);if(0===t)return!0;if(t<=5&&e.deck.length>18)return!0;if(t<=10&&e.deck.length>25)return!0;return!1}(e))return console.log("Computer Knocks"),G(e,!1);return e.currentStage="pickup",e.computerMoves=n,e}(a)))}),[a]);return Object(l.jsxs)("div",{style:{margin:"30px"},children:[Object(l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(l.jsx)("div",{}),Object(l.jsx)(m,{hand:a.computerHand,gameState:a,faceUp:"endround"===a.currentStage}),Object(l.jsxs)(b.a,{children:[Object(l.jsx)(b.a.Toggle,{className:"menu-button",children:Object(l.jsx)(h.a,{path:x.a,size:2,color:"gray"})}),Object(l.jsxs)(b.a.Menu,{className:"in-game-menu",children:[Object(l.jsx)(b.a.Item,{className:"menu-item",onClick:function(){return u(y())},children:"Reset Game"}),Object(l.jsx)(b.a.Item,{className:"menu-item",onClick:function(){return e.onExit(!1)},children:"Exit Game"})]})]})]}),Object(l.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:[Object(l.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly"},children:[Object(l.jsx)("p",{className:"game-text",children:"Discard Pile"}),a.discard.length>0?Object(l.jsx)("img",{src:"".concat("/gin-rummy","/cards/").concat(v(a.discard[a.discard.length-1]),".jpg"),onClick:function(){return u(Object(i.a)({},w(!0,a)))},alt:v(a.discard[a.discard.length-1]),style:{maxHeight:180,margin:10}}):Object(l.jsx)("p",{style:{margin:20},children:"Empty"})]}),Object(l.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly",margin:"10px 100px 10px 100px"},children:["pickup"===a.currentStage&&a.computerMoves?a.computerMoves.map((function(e){return Object(l.jsx)("p",{className:"game-text",children:e})})):void 0,Object(l.jsx)("p",{className:"game-text",children:function(){switch(a.currentStage){case"discard":return"Click on the card you want to discard";case"pickup":return"Click on the card you want to pick up";case"knock":return"Do you want to knock?";default:return""}}()}),"knock"===a.currentStage?Object(l.jsxs)("div",{children:[Object(l.jsx)("button",{className:"game-button",onClick:function(){return u(Object(i.a)({},G(a,!0)))},children:"Knock"}),Object(l.jsx)("button",{className:"game-button",onClick:function(){return u(Object(i.a)(Object(i.a)({},a),{},{currentStage:"computer"}))},children:"End Turn"})]}):void 0,"endround"===a.currentStage?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("p",{className:"game-text",children:"".concat(null!==(t=a.winner)&&void 0!==t?t:""," won that round")}),Object(l.jsx)("button",{className:"game-button",onClick:function(){return u(Object(i.a)({},function(e){var t=e.userGameScore,n=e.computerGameScore;alert(e.winner);var r="You"==e.winner?"pickup":"computer";return Object(i.a)(Object(i.a)({},y(r)),{},{computerGameScore:n,userGameScore:t})}(a)))},children:"End Round"})]}):void 0]}),Object(l.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly"},children:[Object(l.jsx)("p",{className:"game-text",children:"Deck"}),Object(l.jsx)("p",{className:"game-text",style:{fontSize:"20px"},children:"Cards Left: ".concat(a.deck.length)}),a.deck.length>0?Object(l.jsx)("img",{src:"".concat("/gin-rummy","/cards/blue_back.jpg"),onClick:function(){return u(Object(i.a)({},w(!1,a)))},alt:v(a.deck[a.deck.length-1]),style:{maxHeight:180,margin:10}}):Object(l.jsx)("p",{style:{margin:20},children:"Empty"})]})]}),Object(l.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(l.jsx)(m,{hand:a.userHand,onCardSelect:k,gameState:a,setGameState:u,faceUp:!0})}),Object(l.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around",marginTop:"40px"},children:[Object(l.jsx)("p",{className:"game-text",children:"Player Game Score: ".concat(a.userGameScore)}),Object(l.jsx)("p",{className:"game-text",children:"Computer Game Score: ".concat(a.computerGameScore)})]})]})}function y(e){var t=[];s.forEach((function(e){d.forEach((function(n){t.push({value:n,suit:e})}))}));var n=t.sort((function(){return Math.random()-Math.random()})).slice(0,10),r=(t=t.filter((function(e){return!n.includes(e)}))).sort((function(){return Math.random()-Math.random()})).slice(0,10),c=[(t=t.filter((function(e){return!r.includes(e)})))[0]];t=t.slice(1);var a=(null!==e&&void 0!==e?e:Math.random()>.5)?"computer":"pickup";return{userHand:S(n),computerHand:S(r),deck:t,discard:c,currentStage:a,userGameScore:0,computerGameScore:0}}function S(e){for(var t=e.sort((function(e,t){var n=13*s.indexOf(e.suit),r=13*s.indexOf(t.suit);return n+d.indexOf(e.value)-(r+d.indexOf(t.value))})),n=[],r=0;r<t.length-2;r++){var c=[];C(t,t[r])&&function(){c.push(t[r]);for(var e=j(t[r],1);e&&t.some((function(t){var n,r;return t.value==(null===(n=e)||void 0===n?void 0:n.value)&&t.suit==(null===(r=e)||void 0===r?void 0:r.suit)}))&&r<t.length;)c.push(e),r++,e=j(t[r],1)}(),c.length>2&&n.push(c)}var a=e.filter((function(e){return!n.flat().some((function(t){return e.value===(null===t||void 0===t?void 0:t.value)&&e.suit===(null===t||void 0===t?void 0:t.suit)}))})),u=[];d.forEach((function(e){var t=[];s.forEach((function(n){a.some((function(t){return t.suit===n&&t.value===e}))&&t.push({suit:n,value:e})})),t.length>2&&u.push(t)}));var o=a.filter((function(e){return!u.flat().some((function(t){return e.value===(null===t||void 0===t?void 0:t.value)&&e.suit===(null===t||void 0===t?void 0:t.suit)}))}));return{sets:u,runs:n,deadwood:o}}function k(e,t){if("discard"===t.currentStage){var n=S(p(t.userHand).filter((function(t){return t.value!==e.value||t.suit!==e.suit})));t.discard.push(e),t.userHand=n,t.currentStage=f(t.userHand.deadwood)>10?"computer":"knock"}return t}function w(e,t){if("pickup"===t.currentStage){var n=e?t.discard.pop():t.deck.pop();if(n){var r=p(t.userHand);r.push(n);var c=S(r);t.userHand=c,t.currentStage="discard"}}return t}function H(e){var t={A:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,J:0,Q:0,K:0};return e.forEach((function(e){e.value in t&&(t[e.value]+=1)})),t}function C(e,t){if("A"!==t.value&&"2"!==t.value){var n=j(t,-1),r=j(t,-2);if(n&&r&&e.some((function(e){return v(e)===v(n)}))&&e.some((function(e){return v(e)===v(r)})))return!0}if("K"!==t.value&&"Q"!==t.value){var c=j(t,1),a=j(t,2);if(c&&a&&e.some((function(e){return v(e)===v(c)}))&&e.some((function(e){return v(e)===v(a)})))return!0}var u=j(t,-1),o=j(t,1);return!!(u&&o&&e.some((function(e){return v(e)===v(u)}))&&e.some((function(e){return v(e)===v(o)})))}function G(e,t){e.currentStage="endround";var n=f(e.userHand.deadwood),r=f(e.computerHand.deadwood);if(t&&0===n)return Object(i.a)(Object(i.a)({},e),{},{userGameScore:r+25,winner:"You"});if(!t&&0===r)return Object(i.a)(Object(i.a)({},e),{},{computerGameScore:n+25,winner:"Your Opponent"});var c=function(e,t){e.computerHand.deadwood=t?e.computerHand.deadwood.filter((function(t){var n=e.userHand.sets.some((function(e){return e[0].value===t.value})),r=e.userHand.runs.some((function(e){return C(e,t)}));return!n&&!r})):e.userHand.deadwood.filter((function(t){var n=e.computerHand.sets.some((function(e){return e[0].value===t.value})),r=e.computerHand.runs.some((function(e){return C(e,t)}));return!n&&!r}));var n=f(e.userHand.deadwood),r=f(e.computerHand.deadwood);return{updatedPlayerScore:n,updatedComputerScore:r}}(e,t),a=c.updatedPlayerScore,u=c.updatedComputerScore;return t&&a<u?Object(i.a)(Object(i.a)({},e),{},{userGameScore:u-a,winner:"You"}):t&&a>u?Object(i.a)(Object(i.a)({},e),{},{computerGameScore:a-u+25,winner:"Your Opponent"}):!t&&a<u?Object(i.a)(Object(i.a)({},e),{},{userGameScore:u-a+25,winner:"You"}):Object(i.a)(Object(i.a)({},e),{},{computerGameScore:a-u,winner:"Your Opponent"})}var E=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h1",{style:{fontFamily:"Lato",fontSize:"80px",color:"#F1FAEE",backgroundColor:"#457B9D",margin:"0",textAlign:"center",padding:"20px"},children:"Gin Rummy"}),n?Object(l.jsx)(O,{onExit:c}):Object(l.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"500px"},children:Object(l.jsx)("button",{className:"game-button",onClick:function(){return c(!0)},children:"Start Game"})})]})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,33)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,u=t.getTTFB;n(e),r(e),c(e),a(e),u(e)}))};u.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(E,{})}),document.getElementById("root")),N()}},[[27,1,2]]]);
//# sourceMappingURL=main.0fbbb458.chunk.js.map