(this["webpackJsonpgin-rummy"]=this["webpackJsonpgin-rummy"]||[]).push([[0],{21:function(e,n,t){},22:function(e,n,t){},27:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t.n(r),a=t(7),u=t.n(a),o=(t(21),t(22),t(4)),i=t(16),s=["S","C","H","D"],l=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],d=["pickup","discard","knock","computer"],f=t(1);function m(e){var n=e.gameState,t=e.setGameState,r=e.onCardSelect,c=e.hand,a=e.faceUp;return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{children:v(e.hand).map((function(e){return Object(f.jsx)("img",{onClick:function(){return r&&t?t(Object(o.a)({},r(e,n))):console.log("You cannot discard an opponent's card")},src:a?"".concat("/gin-rummy","/cards/").concat(j(e),".jpg"):"".concat("/gin-rummy","/cards/blue_back.jpg"),alt:j(e),style:{maxHeight:180,margin:10}},j(e))}))}),a?Object(f.jsxs)("p",{className:"game-text",style:{marginLeft:"20px"},children:["Score: ",p(c.deadwood)]}):void 0]})}function p(e){var n=0;return e.forEach((function(e){var t=l.indexOf(e.value)+1;n+=t>9?10:t})),n}function v(e){return e.sets.flat().concat(e.runs.flat(),e.deadwood)}function g(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=l[l.indexOf(e.value)+n];return t?{value:t,suit:e.suit}:null}function j(e){return"".concat(e.value).concat(e.suit)}var h=t(11),x=t.n(h),b=t(15),O=t(32);function y(){var e=Object(r.useState)(k()),n=Object(i.a)(e,2),t=n[0],c=n[1];Object(r.useEffect)((function(){return console.log(t)}));return Object(f.jsxs)("div",{style:{margin:"30px"},children:[Object(f.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(f.jsx)("div",{}),Object(f.jsx)(m,{hand:t.computerHand,gameState:t,faceUp:!1}),Object(f.jsxs)(O.a,{children:[Object(f.jsx)(O.a.Toggle,{className:"menu-button",children:Object(f.jsx)(x.a,{path:b.a,size:2,color:"gray"})}),Object(f.jsx)(O.a.Menu,{className:"in-game-menu",children:Object(f.jsx)(O.a.Item,{className:"menu-item",onClick:function(){return c(k())},children:"Reset Game"})})]})]}),Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:[Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly"},children:[Object(f.jsx)("p",{className:"game-text",children:"Discard Pile"}),t.discard.length>0?Object(f.jsx)("img",{src:"".concat("/gin-rummy","/cards/").concat(j(t.discard[t.discard.length-1]),".jpg"),onClick:function(){return c(Object(o.a)({},S(!0,t)))},alt:j(t.discard[t.discard.length-1]),style:{maxHeight:180,margin:10}}):Object(f.jsx)("p",{style:{margin:20},children:"Empty"})]}),Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly",margin:"10px 100px 10px 100px"},children:[Object(f.jsx)("p",{className:"game-text",children:function(){switch(t.currentStage){case"discard":return"It is your turn to discard a card";case"pickup":return"It is your turn to pickup a card";default:return"It is the computer's turn"}}()}),Object(f.jsx)("button",{className:"game-button",onClick:function(){c(Object(o.a)({},function(e){var n=function(e){if(e.discard.length>0){var n=e.discard[e.discard.length-1],t=e.computerHand.sets.some((function(e){return e[0].value===n.value})),r=e.computerHand.deadwood.filter((function(e){return e.value===n.value})).length>1,c=e.computerHand.runs.some((function(e){return g(e[e.length-1],1)===n||g(e[0],-1)===n}));if(r||t||c||E(e.computerHand.deadwood,n))return!1}return!0}(e);console.log("Starting state for computer"),console.log(e),n?console.log("Computer Drawing from deck"):console.log("Computer Drawing from discard");var t=n?e.deck.pop():e.discard.pop(),r=v(e.computerHand);t&&(console.log("Drawn Card: ".concat(j(t))),r.push(t),e.computerHand=C(r));var c=function(e){var n,t=w(e.computerHand.deadwood),r=t[10]+t.J+t.Q+t.K;if(e.deck.length<16&&r>0){var c=e.computerHand.deadwood.sort((function(e,n){return l.indexOf(e.value)-l.indexOf(n.value)})).pop();return c||"knock"}var a=function(e){var n=w(e),t=e.map((function(t){var r=0,c=!1,a=!1;n[t.value]>1&&(r+=n[t.value]-1,c=!0);var u=g(t,1),o=g(t,-1);return(u&&e.some((function(e){return j(e)===j(u)}))||o&&e.some((function(e){return j(e)===j(o)})))&&(r+=1,a=!0),a&&c&&(r+=1),l.indexOf(t.value)>8?r--:l.indexOf(t.value)<2&&r++,{card:t,score:r}})).sort((function(e,n){return n.score-e.score}));return console.log(t),t}(e.computerHand.deadwood),u=null===(n=a.pop())||void 0===n?void 0:n.card;return u||"knock"}(e);if("string"===typeof c)return console.log("Computer Knocks"),Object(o.a)(Object(o.a)({},e),{},{knocker:"computer"});console.log("Computer discarding: ".concat(j(c)));var a=r.indexOf(c);if(a>-1){var u=r.splice(a,1);e.discard.push(u[0])}if(e.computerHand=C(r),function(e){if(1===e.computerHand.deadwood.length)return!0;return!1}(e))return console.log("Computer Knocks"),Object(o.a)(Object(o.a)({},e),{},{knocker:"computer"});return e.currentStage="pickup",e}(t)))},children:"End Turn"})]}),Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly"},children:[Object(f.jsx)("p",{className:"game-text",children:"Deck"}),Object(f.jsx)("p",{className:"game-text",style:{fontSize:"20px"},children:"Cards Left: ".concat(t.deck.length)}),t.deck.length>0?Object(f.jsx)("img",{src:"".concat("/gin-rummy","/cards/blue_back.jpg"),onClick:function(){return c(Object(o.a)({},S(!1,t)))},alt:j(t.deck[t.deck.length-1]),style:{maxHeight:180,margin:10}}):Object(f.jsx)("p",{style:{margin:20},children:"Empty"})]})]}),Object(f.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(f.jsx)(m,{hand:t.userHand,onCardSelect:H,gameState:t,setGameState:c,faceUp:!0})})]})}function k(){var e=[];s.forEach((function(n){l.forEach((function(t){e.push({value:t,suit:n})}))}));var n=e.sort((function(){return Math.random()-Math.random()})).slice(0,10),t=(e=e.filter((function(e){return!n.includes(e)}))).sort((function(){return Math.random()-Math.random()})).slice(0,10),r=[(e=e.filter((function(e){return!t.includes(e)})))[0]];e=e.slice(1);var c=d[0];return{userHand:C(n),computerHand:C(t),deck:e,discard:r,currentStage:c}}function C(e){for(var n=e.sort((function(e,n){var t=13*s.indexOf(e.suit),r=13*s.indexOf(n.suit);return t+l.indexOf(e.value)-(r+l.indexOf(n.value))})),t=[],r=0;r<n.length-2;r++){var c=[];E(n,n[r])&&function(){c.push(n[r]);for(var e=g(n[r],1);e&&n.some((function(n){var t,r;return n.value==(null===(t=e)||void 0===t?void 0:t.value)&&n.suit==(null===(r=e)||void 0===r?void 0:r.suit)}))&&r<n.length;)c.push(e),r++,e=g(n[r],1)}(),c.length>2&&t.push(c)}var a=e.filter((function(e){return!t.flat().some((function(n){return e.value===(null===n||void 0===n?void 0:n.value)&&e.suit===(null===n||void 0===n?void 0:n.suit)}))})),u=[];l.forEach((function(e){var n=[];s.forEach((function(t){a.some((function(n){return n.suit===t&&n.value===e}))&&n.push({suit:t,value:e})})),n.length>2&&u.push(n)}));var o=a.filter((function(e){return!u.flat().some((function(n){return e.value===(null===n||void 0===n?void 0:n.value)&&e.suit===(null===n||void 0===n?void 0:n.suit)}))}));return{sets:u,runs:t,deadwood:o}}function H(e,n){if("discard"===n.currentStage){var t=C(v(n.userHand).filter((function(n){return n.value!==e.value||n.suit!==e.suit})));n.discard.push(e),n.userHand=t,n.currentStage="computer"}return n}function S(e,n){if("pickup"===n.currentStage){var t=e?n.discard.pop():n.deck.pop();if(t){var r=v(n.userHand);r.push(t);var c=C(r);n.userHand=c,n.currentStage="discard"}}return n}function w(e){var n={A:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,J:0,Q:0,K:0};return e.forEach((function(e){e.value in n&&(n[e.value]+=1)})),n}function E(e,n){if("A"!==n.value&&"2"!==n.value){var t=g(n,-1),r=g(n,-2);if(t&&r&&e.some((function(e){return j(e)===j(t)}))&&e.some((function(e){return j(e)===j(r)})))return!0}if("K"!==n.value&&"Q"!==n.value){var c=g(n,1),a=g(n,2);if(c&&a&&e.some((function(e){return j(e)===j(c)}))&&e.some((function(e){return j(e)===j(a)})))return!0}var u=g(n,-1),o=g(n,1);return!!(u&&o&&e.some((function(e){return j(e)===j(u)}))&&e.some((function(e){return j(e)===j(o)})))}var D=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h1",{style:{fontFamily:"Lato",fontSize:"80px",color:"#F1FAEE",backgroundColor:"#457B9D",margin:"0",textAlign:"center",padding:"20px"},children:"Gin Rummy"}),Object(f.jsx)(y,{})]})},I=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,33)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,a=n.getLCP,u=n.getTTFB;t(e),r(e),c(e),a(e),u(e)}))};u.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(D,{})}),document.getElementById("root")),I()}},[[27,1,2]]]);
//# sourceMappingURL=main.a5c3e122.chunk.js.map