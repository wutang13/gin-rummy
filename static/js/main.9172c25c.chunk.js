(this["webpackJsonpgin-rummy"]=this["webpackJsonpgin-rummy"]||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(11),u=n.n(a),o=(n(37),n(15)),i=(n(38),n(39),n(6)),s=["S","C","H","D"],d=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],l={userHand:{sets:[],runs:[],deadwood:[]},computerHand:{sets:[],runs:[],deadwood:[]},deck:[],discard:[],currentStage:"",userGameScore:0,computerGameScore:0,discardMemory:10,playerPickup:[],ginBonus:25,undercutBonus:25},m={runScore:7.800000000000001,setScore:7.5,trioScore:12.8,discardedPenalty:-5.5,pickedPenalty:-4.6000000000000005,valueBonus:1.4000000000000001},p={runScore:1.5,setScore:0,trioScore:4.699999999999999,discardedPenalty:-7.9,pickedPenalty:-8.6,valueBonus:5.199999999999999},f={runScore:.6,setScore:6.2,trioScore:4.5,discardedPenalty:-.09999999999999964,pickedPenalty:-2.1,valueBonus:12.6},j=n(1);function v(e){var t=e.gameState,n=e.setGameState,r=e.onCardSelect,c=e.hand,a=e.faceUp;return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:x(e.hand).map((function(e){return Object(j.jsx)("img",{onClick:function(){return r&&n?n(Object(i.a)({},r(e,t))):console.log("You cannot discard an opponent's card")},src:a?"".concat("/gin-rummy","/cards/").concat(b(e),".jpg"):"".concat("/gin-rummy","/cards/blue_back.jpg"),alt:b(e),style:{maxHeight:180,margin:10}},b(e))}))}),a?Object(j.jsxs)("p",{className:"game-text",style:{marginLeft:"20px"},children:["Score: ",g(c.deadwood)]}):void 0]})}function g(e){var t=0;return e.forEach((function(e){var n=d.indexOf(e.value)+1;t+=n>9?10:n})),t}function x(e){return e.sets.flat().concat(e.runs.flat(),e.deadwood)}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=d[d.indexOf(e.value)+t];return n?{value:n,suit:e.suit}:null}function b(e){return"".concat(e.value).concat(e.suit)}function O(e){return"".concat(function(){switch(e.value){case"A":return"Ace";case"K":return"King";case"Q":return"Queen";case"J":return"Jack";default:return e.value}}()," of ").concat(function(){switch(e.suit){case"H":return"Hearts";case"D":return"Diamonds";case"S":return"Spades";default:return"Clubs"}}())}var y=n(31),S=n.n(y),k=n(32),w=n(18),C=n(23),H=n(22);function G(e){var t,n,c=Object(r.useState)(l),a=Object(o.a)(c,2),u=a[0],s=a[1];Object(r.useEffect)((function(){u.deck.length<3&&"No one"!==u.winner?s(Object(i.a)(Object(i.a)({},u),{},{winner:"No one",currentStage:"endround"})):"computer"===u.currentStage&&s(Object(i.a)({},function(e){var t=function(e){if(e.discard.length>0){var t=e.discard[e.discard.length-1],n=e.computerHand.sets.some((function(e){return e[0].value===t.value})),r=e.computerHand.deadwood.filter((function(e){return e.value===t.value})).length>1,c=e.computerHand.runs.some((function(e){return h(e[e.length-1],1)===t||h(e[0],-1)===t}));if(r||n||c||D(e.computerHand.deadwood,t))return!1}return!0}(e),n=[];t?n.push("Computer drew from deck"):n.push("Computer drew from discard");var r=t?e.deck.pop():e.discard.pop(),c=x(e.computerHand);r&&(c.push(r),e.computerHand=N(c));var a=function(e){var t,n=M(e.computerHand.deadwood),r=n[10]+n.J+n.Q+n.K;if(e.deck.length<20&&r>0){var c=e.computerHand.deadwood.sort((function(e,t){return d.indexOf(e.value)-d.indexOf(t.value)})).pop();return c||"knock"}var a=F(e),u=null===(t=a.pop())||void 0===t?void 0:t.card;return u||"knock"}(e),u="string"===typeof a&&r?r:a;if("string"!=typeof u){n.push("Opponent discarded the ".concat(O(u)));var o=c.indexOf(u);if(o>-1){var i=c.splice(o,1);e.discard.push(i[0])}}if(e.computerHand=N(c),function(e){var t=g(e.computerHand.deadwood);if(t<3)return!0;if(t<7&&e.deck.length>18)return!0;if(t<=10&&e.deck.length>25)return!0;return!1}(e))return I(e,!1);return e.currentStage="pickup",e.computerMoves=n,e}(u)))}),[u]),Object(r.useEffect)((function(){return s(Object(i.a)({},B(e.discardMemory,e.ginBonus,e.undercutBonus)))}),[e.discardMemory,e.ginBonus,e.undercutBonus]);var m=u.userGameScore>=e.gameScoreLimit||u.computerGameScore>=e.gameScoreLimit;return Object(j.jsxs)("div",{style:{margin:"30px"},children:[Object(j.jsx)(C.a,{show:m,backdrop:"static",size:"lg",centered:!0,children:Object(j.jsxs)(C.a.Dialog,{children:[Object(j.jsxs)(C.a.Body,{children:[Object(j.jsx)("p",{className:"game-text",children:"".concat(null!==(t=u.winner)&&void 0!==t?t:""," won the game")}),Object(j.jsx)("p",{className:"game-text",children:"Do you want to play again?"})]}),Object(j.jsxs)(C.a.Footer,{children:[Object(j.jsx)(H.a,{variant:"primary",onClick:function(){return s(B(e.discardMemory,e.ginBonus,e.undercutBonus))},children:"Yes"}),Object(j.jsx)(H.a,{variant:"secondary",onClick:function(){return e.onExit(!1)},children:"No"})]})]})}),Object(j.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(j.jsx)("div",{}),Object(j.jsx)(v,{hand:u.computerHand,gameState:u,faceUp:!!u.winner}),Object(j.jsxs)(w.a,{children:[Object(j.jsx)(w.a.Toggle,{variant:"outline-primary",children:Object(j.jsx)(S.a,{path:k.a,size:2,color:"gray"})}),Object(j.jsxs)(w.a.Menu,{children:[Object(j.jsx)(w.a.Item,{onClick:function(){return s(B(e.discardMemory,e.ginBonus,e.undercutBonus))},children:"Reset Game"}),Object(j.jsx)(w.a.Item,{onClick:function(){return e.onExit(!1)},children:"Exit Game"})]})]})]}),Object(j.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:[Object(j.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly"},children:[Object(j.jsx)("p",{className:"game-text",children:"Discard Pile"}),u.discard.length>0?Object(j.jsx)("img",{src:"".concat("/gin-rummy","/cards/").concat(b(u.discard[u.discard.length-1]),".jpg"),onClick:function(){return s(Object(i.a)({},P(!0,u)))},alt:b(u.discard[u.discard.length-1]),style:{maxHeight:180,margin:10}}):Object(j.jsx)("p",{style:{margin:20},children:"Empty"})]}),Object(j.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly",margin:"10px 100px 10px 100px"},children:["pickup"===u.currentStage&&u.computerMoves?u.computerMoves.map((function(e){return Object(j.jsx)("p",{className:"game-text",children:e})})):void 0,Object(j.jsx)("p",{className:"game-text",children:function(){switch(u.currentStage){case"discard":return"Click on the card you want to discard";case"pickup":return"Click on the card you want to pick up";case"knock":return"Do you want to knock?";default:return""}}()}),"knock"===u.currentStage?Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{className:"game-button",onClick:function(){return s(Object(i.a)({},I(u,!0)))},children:"Knock"}),Object(j.jsx)("button",{className:"game-button",onClick:function(){return s(Object(i.a)(Object(i.a)({},u),{},{currentStage:"computer"}))},children:"End Turn"})]}):void 0,"endround"===u.currentStage?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("p",{className:"game-text",children:"".concat(null!==(n=u.winner)&&void 0!==n?n:""," won that round")}),Object(j.jsx)("button",{className:"game-button",onClick:function(){return s(Object(i.a)({},function(e){var t=e.userGameScore,n=e.computerGameScore,r="You"===e.winner?"pickup":"computer";return Object(i.a)(Object(i.a)({},B(e.discardMemory,e.ginBonus,e.undercutBonus,r)),{},{computerGameScore:n,userGameScore:t})}(u)))},children:"End Round"})]}):void 0]}),Object(j.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly"},children:[Object(j.jsx)("p",{className:"game-text",children:"Deck"}),Object(j.jsx)("p",{className:"game-text",style:{fontSize:"20px"},children:"Cards Left: ".concat(u.deck.length)}),u.deck.length>0?Object(j.jsx)("img",{src:"".concat("/gin-rummy","/cards/blue_back.jpg"),onClick:function(){return s(Object(i.a)({},P(!1,u)))},alt:b(u.deck[u.deck.length-1]),style:{maxHeight:180,margin:10}}):Object(j.jsx)("p",{style:{margin:20},children:"Empty"})]})]}),Object(j.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(j.jsx)(v,{hand:u.userHand,onCardSelect:E,gameState:u,setGameState:s,faceUp:!0})}),Object(j.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around",marginTop:"40px"},children:[Object(j.jsx)("p",{className:"game-text",children:"Player Game Score: ".concat(u.userGameScore)}),Object(j.jsx)("p",{className:"game-text",children:"Computer Game Score: ".concat(u.computerGameScore)})]}),"discard"===u.currentStage&&Object(j.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(j.jsx)("button",{className:"game-button",onClick:function(){return alert("Suggested Discard: ".concat(function(e){var t=F(e).pop();if(!t)return"No suggestion at this time";return O(t.card)}(u)))},children:"Hint"})})]})}function B(e,t,n,r){var c=[];s.forEach((function(e){d.forEach((function(t){c.push({value:t,suit:e})}))}));var a=c.sort((function(){return Math.random()-Math.random()})).slice(0,10),u=(c=c.filter((function(e){return!a.includes(e)}))).sort((function(){return Math.random()-Math.random()})).slice(0,10),o=[(c=c.filter((function(e){return!u.includes(e)})))[0]];c=c.slice(1),console.log(r);var i=null!==r&&void 0!==r?r:Math.random()>.5?"computer":"pickup";console.log(i);var l=N(a),m=N(u);return console.log({userHand:l,computerHand:m,deck:c,discard:o,currentStage:i,userGameScore:0,computerGameScore:0}),{userHand:l,computerHand:m,deck:c,discard:o,currentStage:i,userGameScore:0,computerGameScore:0,discardMemory:e,ginBonus:t,undercutBonus:n,playerPickup:[]}}function N(e){for(var t=e.sort((function(e,t){var n=13*s.indexOf(e.suit),r=13*s.indexOf(t.suit);return n+d.indexOf(e.value)-(r+d.indexOf(t.value))})),n=[],r=0;r<t.length-2;r++){var c=[];D(t,t[r])&&function(){c.push(t[r]);for(var e=h(t[r],1);e&&t.some((function(t){var n,r;return t.value==(null===(n=e)||void 0===n?void 0:n.value)&&t.suit==(null===(r=e)||void 0===r?void 0:r.suit)}))&&r<t.length;)c.push(e),r++,e=h(t[r],1)}(),c.length>2&&n.push(c)}var a=e.filter((function(e){return!n.flat().some((function(t){return e.value===(null===t||void 0===t?void 0:t.value)&&e.suit===(null===t||void 0===t?void 0:t.suit)}))})),u=[];d.forEach((function(e){var t=[];s.forEach((function(n){a.some((function(t){return t.suit===n&&t.value===e}))&&t.push({suit:n,value:e})})),t.length>2&&u.push(t)}));var o=a.filter((function(e){return!u.flat().some((function(t){return e.value===(null===t||void 0===t?void 0:t.value)&&e.suit===(null===t||void 0===t?void 0:t.suit)}))}));return{sets:u,runs:n,deadwood:o}}function E(e,t){if("discard"===t.currentStage){var n=N(x(t.userHand).filter((function(t){return t.value!==e.value||t.suit!==e.suit})));t.discard.push(e),t.userHand=n,t.currentStage=g(t.userHand.deadwood)>10?"computer":"knock"}return t}function P(e,t){if("pickup"===t.currentStage){var n=e?t.discard.pop():t.deck.pop();if(n){var r=x(t.userHand);r.push(n);var c=N(r);t.userHand=c,t.currentStage="discard",t.playerPickup.push(n)}}return t}function M(e){var t={A:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,J:0,Q:0,K:0};return e.forEach((function(e){e.value in t&&(t[e.value]+=1)})),t}function D(e,t){if("A"!==t.value&&"2"!==t.value){var n=h(t,-1),r=h(t,-2);if(n&&r&&e.some((function(e){return b(e)===b(n)}))&&e.some((function(e){return b(e)===b(r)})))return!0}if("K"!==t.value&&"Q"!==t.value){var c=h(t,1),a=h(t,2);if(c&&a&&e.some((function(e){return b(e)===b(c)}))&&e.some((function(e){return b(e)===b(a)})))return!0}var u=h(t,-1),o=h(t,1);return!!(u&&o&&e.some((function(e){return b(e)===b(u)}))&&e.some((function(e){return b(e)===b(o)})))}function F(e){var t=e.computerHand,n=e.playerPickup,r=e.discardMemory,c="computer"!==e.currentStage?e.userHand.deadwood:t.deadwood,a=M(c),u=e.discard.length>=r?e.discard.slice(e.discard.length-r):[],o=e.deck.length<10?f:e.deck.length<20?p:m;return c.map((function(t){var r=0,i=!1,s=!1;a[t.value]>1&&(r+=o.setScore,i=!0);var l=h(t,1),m=h(t,-1);return(l&&c.some((function(e){return b(e)===b(l)}))||m&&c.some((function(e){return b(e)===b(m)})))&&(r+=o.runScore,s=!0),s&&i&&(r+=o.trioScore),"computer"===e.currentStage&&(u.forEach((function(e){var n,c;e.value===t.value?r+=o.discardedPenalty:e.suit!==t.suit||(null===(n=h(t,1))||void 0===n?void 0:n.value)!==e.value&&(null===(c=h(t,-1))||void 0===c?void 0:c.value)!==e.value||(r+=o.discardedPenalty)})),n.forEach((function(e){var n,c;e.value===t.value?r+=o.pickedPenalty:e.suit!==t.suit||(null===(n=h(t,1))||void 0===n?void 0:n.value)!==e.value&&(null===(c=h(t,-1))||void 0===c?void 0:c.value)!==e.value||(r+=o.pickedPenalty)}))),r-=(d.indexOf(t.value)+1)/o.valueBonus,{card:t,score:r}})).sort((function(e,t){return t.score-e.score}))}function I(e,t){e.currentStage="endround";var n=g(e.userHand.deadwood),r=g(e.computerHand.deadwood);if(t&&0===n)return Object(i.a)(Object(i.a)({},e),{},{userGameScore:e.userGameScore+r+e.ginBonus,winner:"You"});if(!t&&0===r)return Object(i.a)(Object(i.a)({},e),{},{computerGameScore:e.computerGameScore+n+e.ginBonus,winner:"Your Opponent"});var c=function(e,t){if(t){var n=e.computerHand.deadwood.filter((function(t){var n=e.userHand.sets.some((function(e){return e[0].value===t.value})),r=e.userHand.runs.some((function(e){return D(e,t)}));return!n&&!r}));return{updatedPlayerScore:g(e.userHand.deadwood),updatedComputerScore:g(n)}}return{updatedPlayerScore:g(e.userHand.deadwood.filter((function(t){var n=e.computerHand.sets.some((function(e){return e[0].value===t.value})),r=e.computerHand.runs.some((function(e){return D(e,t)}));return!n&&!r}))),updatedComputerScore:g(e.computerHand.deadwood)}}(e,t),a=c.updatedPlayerScore,u=c.updatedComputerScore;return t&&a<u?Object(i.a)(Object(i.a)({},e),{},{userGameScore:e.userGameScore+u-a,winner:"You"}):t&&a>u?Object(i.a)(Object(i.a)({},e),{},{computerGameScore:e.computerGameScore+a-u+e.undercutBonus,winner:"Your Opponent"}):!t&&a<u?Object(i.a)(Object(i.a)({},e),{},{userGameScore:e.userGameScore+u-a+e.undercutBonus,winner:"You"}):Object(i.a)(Object(i.a)({},e),{},{computerGameScore:e.computerGameScore+a-u,winner:"Your Opponent"})}var L=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(10),u=Object(o.a)(a,2),i=u[0],s=u[1],d=Object(r.useState)(100),l=Object(o.a)(d,2),m=l[0],p=l[1],f=Object(r.useState)(25),v=Object(o.a)(f,2),g=v[0],x=v[1],h=Object(r.useState)(25),b=Object(o.a)(h,2),O=b[0],y=b[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{style:{fontFamily:"Lato",fontSize:"80px",color:"#F1FAEE",backgroundColor:"#457B9D",margin:"0",textAlign:"center",padding:"20px"},children:"Gin Rummy"}),n?Object(j.jsx)(G,{onExit:c,discardMemory:i,gameScoreLimit:m,undercutBonus:O,ginBonus:g}):Object(j.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"500px"},children:[Object(j.jsx)("button",{className:"game-button",onClick:function(){return c(!0)},children:"Start Game"}),Object(j.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"start",marginTop:"20px"},children:[Object(j.jsxs)("div",{className:"settings-item",children:[Object(j.jsx)("label",{className:"game-text",style:{fontSize:"16px",marginRight:"10px"},children:"Computer Discard Memory:"}),Object(j.jsx)("input",{type:"number",style:{maxWidth:"50px"},value:i,onChange:function(e){return s(e.target.value)}})]}),Object(j.jsxs)("div",{className:"settings-item",children:[Object(j.jsx)("label",{className:"game-text",style:{fontSize:"16px",marginRight:"10px"},children:"Game Score Limit:"}),Object(j.jsx)("input",{type:"number",style:{maxWidth:"50px"},value:m,onChange:function(e){return p(e.target.value)}})]}),Object(j.jsxs)("div",{className:"settings-item",children:[Object(j.jsx)("label",{className:"game-text",style:{fontSize:"16px",marginRight:"10px"},children:"Gin Bonus:"}),Object(j.jsx)("input",{type:"number",style:{maxWidth:"50px"},value:g,onChange:function(e){return x(e.target.value)}})]}),Object(j.jsxs)("div",{className:"settings-item",children:[Object(j.jsx)("label",{className:"game-text",style:{fontSize:"16px",marginRight:"10px"},children:"Undercut Bonus:"}),Object(j.jsx)("input",{type:"number",style:{maxWidth:"50px"},value:O,onChange:function(e){return y(e.target.value)}})]})]})]})]})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,u=t.getTTFB;n(e),r(e),c(e),a(e),u(e)}))};u.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(L,{})}),document.getElementById("root")),Y()}},[[44,1,2]]]);
//# sourceMappingURL=main.9172c25c.chunk.js.map